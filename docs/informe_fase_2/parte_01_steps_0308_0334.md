# Bitácora de Desarrollo - Fase 2 (v0.0.2)

**Objetivo**: Migración del Núcleo a C++/Cython y Audio (APU).

**Estado**: En desarrollo.

---

## Objetivos Principales de la Fase 2

### 1. Migración del Núcleo a C++/Cython
- [ ] Reescritura de CPU (LR35902) en C++ con wrapper Cython
- [x] Migración de MMU a código compilado
- [x] Migración de PPU a código compilado (Fase A: Timing y Estado)
- [ ] Optimización de sincronización ciclo a ciclo
- [ ] Mantener interfaz Python para frontend y tests

### 2. Implementación de Audio (APU)
- [ ] Canal 1: Onda cuadrada con Sweep y Envelope
- [ ] Canal 2: Onda cuadrada con Envelope
- [ ] Canal 3: Onda arbitraria (Wave RAM)
- [ ] Canal 4: Ruido blanco (LFSR)
- [ ] Mezcla de canales y salida a 44100Hz/48000Hz
- [ ] Sincronización de audio con emulación (Dynamic Rate Control o Ring Buffer)

### 3. Mejoras de Arquitectura
- [x] Arquitectura híbrida Python/C++ establecida
- [ ] Gestión de memoria optimizada
- [ ] Tests híbridos (Python instancia Cython -> Cython llama C++)

---

## Entradas de Desarrollo

---

### 2025-12-29 - Step 0369: Ventana Escalable y Título ViboyColor
**Estado**: ✅ **COMPLETADO**

Se implementó la capacidad de redimensionar la ventana del emulador usando la bandera `pygame.RESIZABLE` en `pygame.display.set_mode()`. Se cambió el título de la ventana de "Viboy Color" a "ViboyColor" para una identidad visual más compacta. Se agregó el manejo del evento `pygame.VIDEORESIZE` en los métodos `handle_events()` y `_show_loading_screen()` para actualizar dinámicamente las dimensiones de la ventana cuando el usuario la redimensiona. El renderizado se adapta automáticamente al nuevo tamaño usando `pygame.transform.scale()`.

**Objetivos**:
1. Hacer la ventana del emulador redimensionable
2. Cambiar el título de la ventana de "Viboy Color" a "ViboyColor"
3. Manejar el evento `pygame.VIDEORESIZE` para actualizar las dimensiones dinámicamente
4. Mantener la funcionalidad de escalado existente

**Implementación**:
- Se modificó `pygame.display.set_mode()` para incluir la bandera `pygame.RESIZABLE`
- Se cambió el título de la ventana usando `pygame.display.set_caption("ViboyColor")`
- Se agregó el manejo del evento `pygame.VIDEORESIZE` en `handle_events()` y `_show_loading_screen()`
- Cuando se detecta el evento, se actualizan `self.window_width` y `self.window_height` y se vuelve a llamar a `pygame.display.set_mode()` con las nuevas dimensiones

**Resultados**:
- ✅ La ventana ahora es redimensionable arrastrando los bordes
- ✅ El título muestra "ViboyColor" en lugar de "Viboy Color"
- ✅ El contenido se escala correctamente al redimensionar la ventana
- ✅ El redimensionamiento funciona durante la pantalla de carga

**Archivos Afectados**:
- `src/gpu/renderer.py` - Agregada bandera `pygame.RESIZABLE` en `set_mode()`, cambiado título a "ViboyColor", agregado manejo de `pygame.VIDEORESIZE` en `handle_events()` y `_show_loading_screen()`

**Conceptos de Programación**:
- **Ventanas redimensionables en Pygame**: La bandera `pygame.RESIZABLE` permite que los usuarios redimensionen la ventana, y Pygame genera eventos `VIDEORESIZE` cuando esto ocurre
- **Eventos de Pygame**: Los eventos se manejan en el bucle de eventos usando `pygame.event.get()`, y cada evento tiene un tipo y atributos específicos según el tipo
- **Actualización de superficie**: Cuando se redimensiona la ventana, es necesario volver a llamar a `pygame.display.set_mode()` con las nuevas dimensiones para actualizar la superficie de la ventana
- **Escalado automático**: El uso de `pygame.transform.scale()` en el código de renderizado existente permite que el contenido se adapte automáticamente al nuevo tamaño de la ventana

**Próximos Pasos**:
- Considerar mantener la proporción de aspecto 160:144 al redimensionar (opcional)
- Continuar con otras mejoras de interfaz de usuario según se requiera

---

### 2025-12-29 - Step 0368: Investigación de Por Qué Todos los Tiles Están Vacíos Durante el Renderizado
... (el resto del archivo se mantiene igual)
